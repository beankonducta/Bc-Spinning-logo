<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>My first three.js app</title>
    <style>
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="panel" style="width: 200px; height: 200px"></div>
    <div style="position: absolute; top: -500px">
      <?xml version="1.0" encoding="utf-8"?>
      <svg
        version="1.1"
        id="logo"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px"
        y="0px"
        viewBox="0 0 144 144"
        style="enable-background: new 0 0 144 144"
        xml:space="preserve"
      >
      <g>
        <path d="M119.5,24.6C108,7.6,92.9,3.9,82.1,3.9c-4.4,0-8,0.6-10.1,1.1c-3.5-0.7-6.9-1-10.2-1C39.4,4,27.6,19.8,24.3,25
          C0.1,41.3,3.3,65.3,4.8,72.3c-5.7,29.1,14.2,44.1,20,47.7c11.5,17,26.5,20.6,37.3,20.6c4.4,0,8-0.6,10.1-1.1
          c3.5,0.7,6.9,1.1,10.2,1.1c22.7,0,34.3-15.9,37.5-21c23.9-16.2,21-40.2,19.5-47.3C145.1,43.3,125.3,28.3,119.5,24.6z M115.5,106.2
          L103,93.8c3.1-4.4,5.2-9.5,6.1-14.8H127C127.7,85.5,126.9,96.9,115.5,106.2z M78.8,127.1v-17.6c5.3-1,10.4-3.1,14.8-6.2l12.6,12.6
          C102.1,120.9,93.1,128.4,78.8,127.1z M61.8,17.3c1.2,0,2.4,0.1,3.6,0.2v17.6c-5.3,1-10.4,3.1-14.8,6.1L38,28.7
          C41.7,24,49.3,17.3,61.8,17.3z M72.1,96.6c-6.5,0-12.6-2.5-17.2-7.1l-1-0.9c-3.7-4.2-5.9-9.4-6.2-14.9v-1.3
          c0-6.5,2.5-12.6,7.1-17.2l0.7-0.7c4.2-3.9,9.5-6.1,15.2-6.4H72c6.5,0,12.6,2.5,17.2,7.1l0.4,0.4c4.1,4.2,6.4,9.7,6.7,15.5v1.3
          c0,6.5-2.5,12.6-7.1,17.2l-0.9,0.9c-4.2,3.8-9.4,5.9-15,6.2L72.1,96.6L72.1,96.6z M126.8,65.6h-17.6c-1-5.3-3.1-10.4-6.1-14.8
          l12.6-12.6C120.8,42.3,128.3,50.9,126.8,65.6z M93.6,41.3c-4.4-3.1-9.5-5.2-14.8-6.1V17.4c1-0.1,2.1-0.2,3.3-0.2
          c9.6,0,17.7,3.9,24,11.6L93.6,41.3z M28.7,38.3l12.4,12.5c-3.1,4.4-5.2,9.5-6.1,14.8H17.2C16.5,59.1,17.3,47.7,28.7,38.3z M17.3,79
          h17.6c1,5.3,3.1,10.4,6.2,14.8l-12.6,12.6C23.3,102.3,15.9,93.7,17.3,79z M50.6,103.3c4.4,3.1,9.5,5.2,14.8,6.2v17.7
          c-1,0.1-2.1,0.2-3.3,0.2c-9.6,0-17.7-3.9-24-11.6L50.6,103.3z"/>
        <path class="st0" d="M82.4,141.2c-3.2,0-6.5-0.4-10.2-1.1c-1.8,0.4-5.4,1.1-10.1,1.1c-10.8,0-26.1-3.6-37.7-20.7
          c-4.6-2.9-26-18.1-20.2-48.1c-1.5-7.2-4.4-31.4,19.7-47.7c3.3-5.1,15.3-21.2,37.9-21.2c3.4,0,6.9,0.3,10.2,1
          c1.8-0.4,5.4-1.1,10.1-1.1c10.8,0,26.1,3.6,37.8,20.9c6.3,4,25.7,19.1,20.1,48.1c1.5,7.2,4.3,31.4-19.7,47.7
          C116.2,126.4,104.5,141.2,82.4,141.2z M72.2,138.9l0.1,0c3.7,0.7,7,1.1,10.1,1.1c21.7,0,33.1-14.5,37-20.7l0.2-0.2
          c23.6-16,20.7-39.8,19.3-46.7l0-0.1l0-0.1c5.6-28.5-13.6-43.3-19.7-47.1l-0.2-0.2C107.6,8,92.6,4.5,82.1,4.5c-4.9,0-8.6,0.8-10,1.1
          l-0.1,0l-0.1,0c-3.3-0.7-6.7-1-10.1-1c-22.1,0-33.9,15.9-37,20.7l-0.2,0.2C0.9,41.5,3.9,65.3,5.3,72.2l0,0.1l0,0.1
          c-5.8,29.6,15.4,44.4,19.7,47.1l0.2,0.2C36.6,136.5,51.6,140,62.1,140c4.9,0,8.6-0.8,10-1.1L72.2,138.9z M62.1,128
          c-9.8,0-18-4-24.4-11.8l-0.3-0.4l13.2-13.2l0.4,0.3c4.3,3,9.3,5.1,14.6,6.1L66,109v18.7l-0.5,0C64.4,127.9,63.3,128,62.1,128z
           M38.9,115.8c6.1,7.3,14,11,23.2,11c1,0,1.9-0.1,2.7-0.1V110c-5.1-1-10-3.1-14.2-5.9L38.9,115.8z M82,127.8c-1.1,0-2.2,0-3.3-0.2
          l-0.5,0V109l0.5-0.1c5.3-1,10.3-3.1,14.6-6.1l0.4-0.3l13.3,13.3l-0.3,0.4C103.7,119.9,95.6,127.8,82,127.8z M79.4,126.6
          c14.2,1.1,22.8-6.8,26.1-10.6L93.5,104c-4.2,2.9-9.1,4.9-14.2,5.9V126.6z M28.5,107.2l-0.4-0.3c-4.9-3.9-12.9-12.6-11.4-27.9l0-0.5
          h18.6l0.1,0.5c1,5.3,3.1,10.3,6.1,14.6l0.3,0.4L28.5,107.2z M17.8,79.6c-1.2,14.1,6,22.3,10.6,26.1l11.9-11.9
          c-2.9-4.2-4.9-9.1-5.9-14.2H17.8z M115.5,107l-13.2-13.1l0.3-0.4c3-4.3,5.1-9.4,6-14.6l0.1-0.5h18.9l0.1,0.5
          c0.7,6.2,0,18.1-11.7,27.7L115.5,107z M103.7,93.7l11.8,11.7c10.7-8.9,11.5-19.8,11-25.9h-16.9C108.6,84.6,106.6,89.5,103.7,93.7z
           M73.3,97.3l-1.3-0.1c-6.7,0-12.9-2.6-17.6-7.3l-1-0.9c-3.9-4.4-6.1-9.7-6.4-15.3l0-1.3c0-6.7,2.6-12.9,7.3-17.6l0.7-0.7
          c4.3-4,9.7-6.3,15.6-6.6l1.3,0c6.7,0,12.9,2.6,17.6,7.3l0.4,0.4c4.1,4.2,6.6,9.9,6.9,15.9l0,1.3c0,6.7-2.6,12.9-7.3,17.6l-0.9,0.9
          C84.4,94.8,79.1,97,73.3,97.3z M70.7,48.7C65.1,49,60,51.1,55.9,54.9l-0.7,0.7c-4.5,4.5-6.9,10.4-6.9,16.8v1.3
          c0.3,5.3,2.4,10.4,6.1,14.5l1,0.9c4.5,4.5,10.5,7,16.8,7l0,0l1.2,0.1c5.5-0.3,10.5-2.4,14.6-6.1l0.9-0.9c4.5-4.5,6.9-10.4,6.9-16.8
          v-1.3C95.4,65.4,93.1,60,89.2,56l-0.4-0.4c-4.5-4.5-10.4-6.9-16.8-6.9H70.7z M127.3,66.2h-18.6l-0.1-0.5c-1-5.2-3.1-10.3-6-14.6
          l-0.3-0.4l13.3-13.3l0.4,0.3c4.9,3.9,12.8,12.8,11.3,27.9L127.3,66.2z M109.7,65h16.6c1.2-13.3-5-21.5-10.6-26.1l-11.9,11.9
          C106.6,55.1,108.6,60,109.7,65z M35.5,66.2H16.7l-0.1-0.5c-0.7-6.2,0-18.1,11.7-27.8l0.4-0.3l13.1,13.2l-0.3,0.4
          c-3,4.3-5.1,9.4-6,14.6L35.5,66.2z M17.7,65h16.8c0.9-5.1,2.9-9.9,5.8-14.2L28.7,39.1C18,48.1,17.2,59,17.7,65z M93.7,42l-0.4-0.3
          c-4.3-3-9.4-5.1-14.6-6l-0.5-0.1V16.9l0.5-0.1c1-0.1,2.1-0.2,3.4-0.2c9.8,0,18,4,24.4,11.8l0.3,0.4L93.7,42z M79.4,34.7
          c5.1,0.9,9.9,2.9,14.2,5.8l11.8-11.8c-6.1-7.3-14-11-23.2-11c-1,0-1.9,0.1-2.7,0.1V34.7z M50.5,41.9L37.2,28.7l0.3-0.4
          C41,24,48.7,16.7,61.8,16.7c1.2,0,2.5,0.1,3.6,0.2l0.5,0v18.6l-0.5,0.1c-5.2,1-10.3,3.1-14.6,6L50.5,41.9z M38.8,28.7l11.9,11.8
          c4.2-2.8,9.1-4.8,14.2-5.8V18c-1-0.1-2-0.2-3-0.2C49.5,17.9,42.2,24.4,38.8,28.7z"/>
      </g>
      </svg>
    </div>
    <script src=""></script>
    <script src=""></script>
    <script>
      function injectScript(src) {
        return new Promise((resolve, reject) => {
          const script = document.createElement("script");
          script.src = src;
          script.addEventListener("load", resolve);
          script.addEventListener("error", (e) => reject(e.error));
          document.head.appendChild(script);
        });
      }

      // change these to s/whatever.js for squarespace
      injectScript("js/three.js")
        .then(() => {
          console.log("Three js loaded!");
          injectScript("js/SVGLoader.js")
            .then(() => {
              console.log("SVGLoader loaded!");
              const scene = new THREE.Scene();

              const ratio = 1;
              const renderer = new THREE.WebGLRenderer({ antialias: true });

              renderer.setSize(200, 200);
              renderer.setClearColor(0x333333);

              const camera = new THREE.PerspectiveCamera(
                100,
                ratio,
                0.01,
                1000
              );
              camera.position.z = 100;

              const light = new THREE.PointLight(0xffffff, 5);
              light.position.set(500, 500, 5);
              scene.add(light);

              document.querySelector("#panel").appendChild(renderer.domElement);

              window.addEventListener("resize", function (e) {
                camera.aspect = 1;
                camera.updateProjectionMatrix();

                renderer.setSize(200, 200);
              });

              const svgMarkup = document.getElementById("logo").outerHTML;

              const loader = new THREE.SVGLoader();
              const svgData = loader.parse(svgMarkup);
              const svgGroup = new THREE.Group();
              svgGroup.scale.y *= -1;

              const material = new THREE.MeshPhongMaterial();
              material.color = new THREE.Color(0xffffff);
              material.specular = new THREE.Color(0xe6006f);
              material.emissive = new THREE.Color(0x000000);
              material.reflectivity = 0.5;
              material.shininess = 10;

              svgData.paths.forEach((path, i) => {
                const shapes = path.toShapes(true);

                shapes.forEach((shape, j) => {
          
                  const geometry = new THREE.ExtrudeGeometry(shape, {
                    depth: 16,
                    bevelEnabled: true,
                    bevelThickness: 1,
                    bevelSize: 2,
                    bevelOffset: 0,
                    bevelSegments: 100,
                  });

                  const mesh = new THREE.Mesh(geometry, material);

                  svgGroup.add(mesh);
                });
              });

              const box = new THREE.Box3().setFromObject(svgGroup);
              const size = new THREE.Vector3();
              box.getSize(size);

              const yOffset = size.y / -2;
              const xOffset = size.x / -2;

              svgGroup.children.forEach((item) => {
                item.position.x = xOffset;
                item.position.y = yOffset;
              });

              scene.add(svgGroup);

              function animate() {
                renderer.render(scene, camera);
                svgGroup.rotation.y += 0.005;
                requestAnimationFrame(animate);
              }

              animate();

            })
            .catch((error) => {
              console.error(error);
            });
        })
        .catch((error) => {
          console.error(error);
        });
    </script>
  </body>
</html>